# Climate-Visualizer
## Welcome to our Climate Change Visualizer app!
This app was developed by Henry Lui, Edward (Hua) Zeng, and Roque Soto Castaneda for our final CS 591 project at the University of Pennsylvania's Masters in Computer and Information Technologies program (MCIT). We wanted our project to target some of the practical issues in everyday life, and due to the pressing and important nature of climate change we decided to create a tool for educational outreach. 

## Goals
Our main goals for this project were to create an application that was both easy to use and could reveal personalized and interesting information about the user. In order to maintain the ease of use and access we landed on developing the application as a web-app that takes a single input from the user (their address) and allows the user to navigate from page to page at the use of a button. It was also important that the application not crash regardless of user input, so we implemented failsafe mechanisms to maintain ease of access for the user. 

## Project Design
We broke down the project into 4 main components as can be seen in our very rudimentary design layout. ![](/DesignDocument.png)

Aside from the technologies listed below, we used [Gradle](https://gradle.org/) as our tool of choice for building the web-application.

### Part 1 - MVC
The first component is the Graphical User Interface or GUI which will take charge of interacting with the user and taking in user input.  The GUI itself is implemented with a [Model-View-Controller](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller) (MVC) architectural pattern using the [Spring](https://spring.io/) microservices framework. Spring is a tool used to get micro-services like web applications deployed as quickly as possible by making opinionated (choosing what they think are the best tools) decisions on what the most useful combination of libraries are given a project's needs and taking care of any compatibility issues. In our case, we used [Spring Boot](https://spring.io/projects/spring-boot) to startup the project and chose [Thymeleaf](https://www.thymeleaf.org/) as a template manager for our web application (To create a reactive web-application).

The MVC architecture divides the GUI into a Model - a map of String keys to objects - that stores information for use by the template engine to change the html based on user input, a Controller which listens for GET and POST requests on the web site and works together with the template engine to store information in the Model and direct the user to different views, and the View (HMTL, CSS, and JavaScript) that instructs the user, takes in their information and shows them the end result.

In our project, the MVC serves as the "main method" that drives the application, as it is activated when a user enters the site and it calls the other methods within the project which then run within the server to parse the user input and produce meaningful figures.

### Part 2 - Geolocating
The second component is the Geolocator method which takes charge of parsing user input from a string which represents some real-world location or address, to a lat and lon coordinate result (stored in a custom tuple object). This method works by taking the user string from the MVC and building a url query to request geocoding data from the open-source service [OpenStreetMap](https://www.openstreetmap.org/#map=12/40.0026/-75.1181) using their [Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim) web query service to fetch information about the user's address in the form of Json files. These Json files are compiled into a large string and this string is parsed into a Java json object using Google's [GSON](https://github.com/google/gson) Json parser. The Nominatim service produces a list of Json results, from which the top result is selected (as the most likely user location) and the latitude and longitude data from that object are retrieved. The Latitude and Longitude data are finally outputted from the Geolocation method using a [Tuple](https://en.wikipedia.org/wiki/Tuple) pair object, which takes in latitude as the first double value and longitude as the second. This tuple is then processed by the MVC and provided as input for the next component, the database. 

### Part 3 - Database
The Third component of the application is the database of climate data that is indexed for the data appropriate to the user latitude and longitude. This database was obtained from the [Climate Data Guide](https://climatedataguide.ucar.edu/climate-data/global-land-precipitation-and-temperature-willmott-matsuura-university-delaware) and it contains data from "The Climate Data Guide: Global (land) precipitation and temperature: Willmott & Matsuura, University of Delaware." As provided by Matsuura, Kenji & National Center for Atmospheric Research Staff (Eds). We use the latest (2017) temperature data which provides us with monthly average air temperatures from 2017 and dating back to 1900. This data has a resolution 0.5 by 0.5 degrees to which we approximate the user locations. Our WeatherDatabase method takes a user's latitude and longitude data and indexes the air temperature data for the nearest grid point in the model, and compiles that data in a Year object which contains the monthly averages for a given year, and builds an array of Year objects that represents the entire span of monthly temperature data for every year in the record at the user's approximately location.

### Part 4 - Analysis
The final component of the application is the analysis and plotting of the climate data. This area has the most potential for future growth, but currently we perform two serparate analyses of the data, one which presents the average yearly temperature for every year in the record, and another which presents a histogram of the hottest month of the year for each year in the record. The StatsAnalysis method takes in the array of Year objects produced by the Database and it has several methods which produce the X and y data for the aforementioned plots. The x and y data are then used alongside the [canvasJS](https://canvasjs.com/spring-mvc-charts/) Javascript library to produce the plots that the user will be shown.

## Testing & Documentation
We are committed to producing quality code that can be easily understood and can be relied upon. To that extent we have already implemented a suite of JUnit tests for the GeoLocator and Tuple classes within GeoLocatorTest.java. We aim to produce testing suites for the Database and Analysis components as well in the coming days, and continue documenting the methods within them.
